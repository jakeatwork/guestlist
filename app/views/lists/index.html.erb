<div class="container">
<h1>Lists</h1>

<table class="table table-striped table-bordered">
  <thead>
    <tr>
      <th>List Name</th>
      <th colspan="2">Actions</th>
    </tr>
  </thead>

  <tbody>
    <% @lists.each do |list| %>
      <tr>
        <td><%= list.name %></td>
        
        <!-- THIS IS FOR TOUR MANAGERS ONLY -->
        <% if can? :manage, Guest %>
        <td>
        <div class="btn-group">
          <%= button_to "Add Guests", users_path, :class => "btn btn-xs btn-primary", :method => :get %>
          </div>
        </td>
        <% end %>
        <td><%= link_to 'Show', list %><br>

        <!-- modal goes here -->

            <div class="container">
              <h1>Guests</h1>


              <%= form_tag users_path, method: :get do %>
                <p>
                  <%= text_field_tag :query, params[:query] %>
                  <%= submit_tag "Search", name: nil %>
                </p>
              <% end %>

              <table class="table table-striped table-hover">
                <thead>
                  <tr>
                    <th>Photo</th>
                    <th>Name</th>
                    <th>Source</th>
                    <th>Add to List</th>
                  </tr>
                </thead>

                <tbody>
                  <% @users.each do |user| %>
                    <tr>
                      <td><img src="<%= user.picture %>" style="float: left;margin: 5px;"></td>
                      <td><%= user.name %></td>
                      <td><%= user.provider %></td>
                      <td>
                        <div class="btn-group">
                        <%= button_to "Add Guest to List", users_path, :class => "btn btn-xs btn-primary", :method => :get %>
                        </div>
                      </td>
                    </tr>
                  <% end %>
                </tbody>
              </table>
            </div>






        <!-- THIS IS FOR ADMINS ONLY -->
        <% if can? :manage, :all %>
          <%= link_to 'Edit', edit_list_path(list) %><br>
          <%= link_to 'Destroy', list, method: :delete, data: { confirm: 'Are you sure?' } %>
        <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>
<% if can? :manage, List %>
  <div class="btn-group">
    <%= button_to "New List", new_list_path, :class => "btn btn-default btn-xs", :method => :get %>
  </div>
<% end %>
</div>
